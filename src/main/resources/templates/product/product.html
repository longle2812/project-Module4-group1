<!DOCTYPE html>
<html lang="zxx " xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="Fashi Template">
    <meta name="keywords" content="Fashi, unica, creative, html">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Fashi | Template</title>

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css?family=Muli:300,400,500,600,700,800,900&display=swap" rel="stylesheet">

    <!-- Css Styles -->
    <link rel="stylesheet" href="/../css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="/../css/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="/../css/themify-icons.css" type="text/css">
    <link rel="stylesheet" href="/../css/elegant-icons.css" type="text/css">
    <link rel="stylesheet" href="/../css/owl.carousel.min.css" type="text/css">
    <link rel="stylesheet" href="/../css/nice-select.css" type="text/css">
    <link rel="stylesheet" href="/../css/jquery-ui.min.css" type="text/css">
    <link rel="stylesheet" href="/../css/slicknav.min.css" type="text/css">
    <link rel="stylesheet" href="/../css/style.css" type="text/css">
    <link rel="stylesheet" href="/../css/star-rating-svg.css" type="text/css">
</head>

<body>
<!-- Page Preloder -->
<div th:fragment="preloader" id="preloder">
    <div class="loader"></div>
</div>

<!-- Header Section Begin -->
<header th:fragment="header" class="header-section">
    <div class="header-top">
        <div class="container">
            <div class="ht-left">
                <div class="mail-service">
                    <i class=" fa fa-envelope"></i>
                    hello.colorlib@gmail.com
                </div>
                <div class="phone-service">
                    <i class=" fa fa-phone"></i>
                    +65 11.188.888
                </div>
            </div>
            <div class="ht-right">
                <span id="name_or_login">
                    <a href="/login" class="login-panel"><i class="fa fa-user"></i>Login</a>
                </span>
                <div class="lan-selector">
                    <select class="language_drop" name="countries" id="countries" style="width:300px;">
                        <option value='yt' data-image="/../img/flag-1.jpg" data-imagecss="flag yt"
                                data-title="English">English
                        </option>
                        <option value='yu' data-image="/../img/flag-2.jpg" data-imagecss="flag yu"
                                data-title="Bangladesh">German
                        </option>
                    </select>
                </div>
                <div class="top-social">
                    <a href="#"><i class="ti-facebook"></i></a>
                    <a href="#"><i class="ti-twitter-alt"></i></a>
                    <a href="#"><i class="ti-linkedin"></i></a>
                    <a href="#"><i class="ti-pinterest"></i></a>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="inner-header">
            <div class="row">
                <div class="col-lg-2 col-md-2">
                    <div class="logo">
                        <a href="../index.html">
                            <img src="/../img/logo.png" alt="">
                        </a>
                    </div>
                </div>
                <div class="col-lg-7 col-md-7">
                    <div class="advanced-search">
                        <button type="button" class="category-btn">Search product</button>
                        <div class="input-group">
                            <input id="search_box" type="text" placeholder="What do you need?">
                            <button id="advanced_search" type="button"><i class="ti-search"></i></button>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 text-right col-md-3">
                    <ul class="nav-right">
                        <li class="heart-icon">
                            <a href="#">
                                <i class="icon_heart_alt"></i>
                                <span>1</span>
                            </a>
                        </li>
                        <li class="cart-icon">
                            <a href="#">
                                <i class="icon_bag_alt"></i>
                                <span>3</span>
                            </a>
                            <div class="cart-hover" id="cart-hover">
                                <div class="select-items">
                                    <table>
                                        <tbody>
                                        <tr>
                                            <td class="si-pic"><img src="/../img/select-product-1.jpg" alt=""></td>
                                            <td class="si-text">
                                                <div class="product-selected">
                                                    <p>$60.00 x 1</p>
                                                    <h6>Kabino Bedside Table</h6>
                                                </div>
                                            </td>
                                            <td class="si-close">
                                                <i class="ti-close"></i>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="si-pic"><img src="/../img/select-product-2.jpg" alt=""></td>
                                            <td class="si-text">
                                                <div class="product-selected">
                                                    <p>$60.00 x 1</p>
                                                    <h6>Kabino Bedside Table</h6>
                                                </div>
                                            </td>
                                            <td class="si-close">
                                                <i class="ti-close"></i>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="select-total">
                                    <span>total:</span>
                                    <h5>$120.00</h5>
                                </div>
                                <div class="select-button">
                                    <a href="#" class="primary-btn view-card">VIEW CARD</a>
                                    <a href="#" class="primary-btn checkout-btn">CHECK OUT</a>
                                </div>
                            </div>
                        </li>
                        <li class="cart-price">$150.00</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="nav-item">
        <div class="container">
            <div class="nav-depart">
                <div class="depart-btn">
                    <i class="ti-menu"></i>
                    <span>All departments</span>
                    <ul class="depart-hover">
                        <li class="active"><a href="#">Women’s Clothing</a></li>
                        <li><a href="#">Men’s Clothing</a></li>
                        <li><a href="#">Underwear</a></li>
                        <li><a href="#">Kid's Clothing</a></li>
                        <li><a href="#">Brand Fashion</a></li>
                        <li><a href="#">Accessories/Shoes</a></li>
                        <li><a href="#">Luxury Brands</a></li>
                        <li><a href="#">Brand Outdoor Apparel</a></li>
                    </ul>
                </div>
            </div>
            <nav class="nav-menu mobile-menu">
                <ul>
                    <li><a href="/index">Home</a></li>
                    <li class="active"><a href="/shop">Shop</a></li>
                    <li><a href="#">Collection</a>
                        <ul class="dropdown">
                            <li><a href="#">Men's</a></li>
                            <li><a href="#">Women's</a></li>
                            <li><a href="#">Kid's</a></li>
                        </ul>
                    </li>
                    <li><a href="../blog.html">Blog</a></li>
                    <li><a href="../contact.html">Contact</a></li>
                    <li><a href="#">Pages</a>
                        <ul class="dropdown">
                            <li><a href="/blog-details">Blog Details</a></li>
                            <li><a href="/shopping-cart">Shopping Cart</a></li>
                            <li><a href="/check-out">Checkout</a></li>
                            <li><a href="/faq">Faq</a></li>
                            <li><a href="/register">Register</a></li>
                            <li><a href="/login">Login</a></li>
                        </ul>
                    </li>
                </ul>
            </nav>
            <div id="mobile-menu-wrap"></div>
        </div>
    </div>
</header>
<!-- Header End -->

<!-- Breadcrumb Section Begin -->
<div th:fragment="breadcrumb" class="breacrumb-section">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="breadcrumb-text product-more">
                    <a href="./home.html"><i class="fa fa-home"></i> Home</a>
                    <a href="shop.html">Shop</a>
                    <span>Detail</span>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Breadcrumb Section End -->

<!-- Product Shop Section Begin -->
<section class="product-shop spad page-details">
    <div class="container">
        <div id="side_list" class="row">
            <div class="col-lg-3 col-md-6 col-sm-8 order-2 order-lg-1 produts-sidebar-filter">
                <!--Collection Filter-->
                <div class="filter-widget">
                    <h4 class="fw-title">Collections</h4>
                    <ul class="filter-catagories">
                        <li th:each="collection : ${collections}">
                            <a th:attr="data-collection-id=${collection.id}" class="collection_name" href='#'
                               th:text="${collection.name}"></a>
                        </li>
                    </ul>
                </div>
                <!--Categories Filter-->
                <div class="filter-widget">
                    <h4 class="fw-title">Categories</h4>
                    <div class="fw-tags">
                        <a th:each="cate:${categories}" href="#" th:text="${cate.name}"></a>
                    </div>
                </div>
            </div>
            <div class="col-lg-9 order-1 order-lg-2">
                <div id="product_list" class="row">
                    <div class="col-lg-6">
                        <div class="product-pic-zoom">
                            <img class="product-big-img" th:src="@{'/files/' + ${main_picture.name}}" alt="">
                            <div class="zoom-icon">
                                <i class="fa fa-search-plus"></i>
                            </div>
                        </div>
                        <div class="product-thumbs">
                            <div class="product-thumbs-track ps-slider owl-carousel">
                                <div class="pt active" th:attr="data-imgbigurl=@{'/files/' + ${main_picture.name}}"><img
                                        th:src="@{'/files/' + ${main_picture.name}}" alt=""></div>
                                <div th:each="subPic: ${sub_pictures}" class="pt"
                                     th:attr="data-imgbigurl=@{'/files/' + ${subPic.name}}"><img
                                        th:src="@{'/files/' + ${subPic.name}}" alt=""></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="product-details">
                            <div class="pd-title">
                                <span th:text="${product.collection.name}"></span>
                                <h3 th:text="${product.name}"></h3>
                                <a href="#" class="heart-icon"><i class="icon_heart_alt"></i></a>
                            </div>
                            <div class="pd-rating">
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star-o"></i>
                                <span>(5)</span>
                            </div>
                            <div class="pd-desc">
                                <p th:text="${product.description}"></p>
                                <h4 th:text="${product.price}+'$'"><span th:text="${product.price * 2}"></span></h4>
                            </div>
                            <div class="pd-color">
                                <h6>Color</h6>
                                <div class="pd-color-choose">
                                    <div class="cc-item">
                                        <input type="radio" id="cc-black">
                                        <label for="cc-black"></label>
                                    </div>
                                    <div class="cc-item">
                                        <input type="radio" id="cc-yellow">
                                        <label for="cc-yellow" class="cc-yellow"></label>
                                    </div>
                                    <div class="cc-item">
                                        <input type="radio" id="cc-violet">
                                        <label for="cc-violet" class="cc-violet"></label>
                                    </div>
                                </div>
                            </div>
                            <div class="pd-size-choose">
                                <div class="sc-item">
                                    <input type="radio" id="sm-size">
                                    <label for="sm-size">s</label>
                                </div>
                                <div class="sc-item">
                                    <input type="radio" id="md-size">
                                    <label for="md-size">m</label>
                                </div>
                                <div class="sc-item">
                                    <input type="radio" id="lg-size">
                                    <label for="lg-size">l</label>
                                </div>
                                <div class="sc-item">
                                    <input type="radio" id="xl-size">
                                    <label for="xl-size">xs</label>
                                </div>
                            </div>
                            <div class="quantity">
                                <div class="pro-qty">
                                    <input type="text" value="1">
                                </div>
                                <a href="#" class="primary-btn pd-cart">Add To Cart</a>
                            </div>
                            <ul class="pd-tags">
                                <li><span>CATEGORIES: </span> <span th:text="${product.category.name}"
                                                                    th:remove="tag"></span></li>
                                <li><span>TAGS</span>: Clothing, T-shirt, Woman</li>
                            </ul>
                            <div class="pd-share">
                                <div class="p-code">Product ID : <span th:text="${product.id}"></span></div>
                                <div class="pd-social">
                                    <a href="#"><i class="ti-facebook"></i></a>
                                    <a href="#"><i class="ti-twitter-alt"></i></a>
                                    <a href="#"><i class="ti-linkedin"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="product-tab">
                    <div class="tab-item">
                        <ul class="nav" role="tablist">
                            <li>
                                <a class="active" data-toggle="tab" href="#tab-1" role="tab">DESCRIPTION</a>
                            </li>
                            <li>
                                <a data-toggle="tab" href="#tab-2" role="tab">SPECIFICATIONS</a>
                            </li>
                            <li id="review-number-tab">
                                <a  data-toggle="tab" href="#tab-3" role="tab">Customer Reviews <span
                                        th:text="'('+${review_number}+')'" th:remove="tag"></span></a>
                            </li>
                        </ul>
                    </div>
                    <div class="tab-item-content">
                        <div class="tab-content">
                            <div class="tab-pane fade-in active" id="tab-1" role="tabpanel">
                                <div class="product-content">
                                    <div class="row">
                                        <div class="col-lg-7">
                                            <h5>Introduction</h5>
                                            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do
                                                eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim
                                                ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut
                                                aliquip ex ea commodo consequat. Duis aute irure dolor in </p>
                                            <h5>Features</h5>
                                            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do
                                                eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim
                                                ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut
                                                aliquip ex ea commodo consequat. Duis aute irure dolor in </p>
                                        </div>
                                        <div class="col-lg-5">
                                            <img src="/../img/product-single/tab-desc.jpg" alt="">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="tab-2" role="tabpanel">
                                <div class="specification-table">
                                    <table>
                                        <tr>
                                            <td class="p-catagory">Customer Rating</td>
                                            <td>
                                                <div class="pd-rating">
                                                    <i class="fa fa-star"></i>
                                                    <i class="fa fa-star"></i>
                                                    <i class="fa fa-star"></i>
                                                    <i class="fa fa-star"></i>
                                                    <i class="fa fa-star-o"></i>
                                                    <span>(5)</span>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="p-catagory">Price</td>
                                            <td>
                                                <div class="p-price" th:text="${product.price}+' $'"></div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="p-catagory">Availability</td>
                                            <td>
                                                <div class="p-stock">102 in stock</div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="p-catagory">Weight</td>
                                            <td>
                                                <div class="p-weight">1,3kg</div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="p-catagory">Size</td>
                                            <td>
                                                <div class="p-size">Xxl</div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="p-catagory">Color</td>
                                            <td><span class="cs-color"></span></td>
                                        </tr>
                                        <tr>
                                            <td class="p-catagory">Product ID</td>
                                            <td>
                                                <div class="p-code" th:text="${product.id}"></div>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="tab-3" role="tabpanel">
                                <div class="customer-review-option">
                                    <h4 th:text="${review_number}+' Reviews'"></h4>
                                    <div class="comment-option">
                                        <div th:each="review:${reviews}" class="co-item">
                                            <div class="avatar-pic">
                                                <img th:src="@{'/files/' + ${review.user.avatar.name}}" alt="">
                                            </div>
                                            <div class="avatar-text">
                                                <div th:each="rated: ${review.rating}" class="at-rating">
                                                    <!--                                                    <i th:name="${rated}" class="fa fa-star"></i>-->
                                                    <th:block th:each="i: ${#numbers.sequence(0, review.rating - 1)}">
                                                        <i th:name="${i}" class="fa fa-star"></i>
                                                    </th:block>
                                                </div>
                                                <h5><span th:text="${review.user.username}" th:remove="tag"></span>
                                                    <span>27 Aug 2019</span></h5>
                                                <div class="at-reply" th:text="${review.content}"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="personal-rating">
                                        <h6>Your Rating</h6>
                                        <div class="my-rating">
                                        </div>
                                    </div>
                                    <div class="leave-comment">
                                        <h4>Leave A Comment</h4>
                                        <form class="comment-form">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <textarea id="review_content" placeholder="Messages"></textarea>
                                                    <button th:id="${product.id}" class="site-btn"
                                                            onclick="addReview()">Send message
                                                    </button>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Product Shop Section End -->

<!-- Related Products Section End -->
<div class="related-products spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="section-title">
                    <h2>Related Products</h2>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-3 col-sm-6">
                <div class="product-item">
                    <div class="pi-pic">
                        <img src="/../img/products/women-1.jpg" alt="">
                        <div class="sale">Sale</div>
                        <div class="icon">
                            <i class="icon_heart_alt"></i>
                        </div>
                        <ul>
                            <li class="w-icon active"><a href="#"><i class="icon_bag_alt"></i></a></li>
                            <li class="quick-view"><a href="#">+ Quick View</a></li>
                            <li class="w-icon"><a href="#"><i class="fa fa-random"></i></a></li>
                        </ul>
                    </div>
                    <div class="pi-text">
                        <div class="catagory-name">Coat</div>
                        <a href="#">
                            <h5>Pure Pineapple</h5>
                        </a>
                        <div class="product-price">
                            $14.00
                            <span>$35.00</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-sm-6">
                <div class="product-item">
                    <div class="pi-pic">
                        <img src="/../img/products/women-2.jpg" alt="">
                        <div class="icon">
                            <i class="icon_heart_alt"></i>
                        </div>
                        <ul>
                            <li class="w-icon active"><a href="#"><i class="icon_bag_alt"></i></a></li>
                            <li class="quick-view"><a href="#">+ Quick View</a></li>
                            <li class="w-icon"><a href="#"><i class="fa fa-random"></i></a></li>
                        </ul>
                    </div>
                    <div class="pi-text">
                        <div class="catagory-name">Shoes</div>
                        <a href="#">
                            <h5>Guangzhou sweater</h5>
                        </a>
                        <div class="product-price">
                            $13.00
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-sm-6">
                <div class="product-item">
                    <div class="pi-pic">
                        <img src="/../img/products/women-3.jpg" alt="">
                        <div class="icon">
                            <i class="icon_heart_alt"></i>
                        </div>
                        <ul>
                            <li class="w-icon active"><a href="#"><i class="icon_bag_alt"></i></a></li>
                            <li class="quick-view"><a href="#">+ Quick View</a></li>
                            <li class="w-icon"><a href="#"><i class="fa fa-random"></i></a></li>
                        </ul>
                    </div>
                    <div class="pi-text">
                        <div class="catagory-name">Towel</div>
                        <a href="#">
                            <h5>Pure Pineapple</h5>
                        </a>
                        <div class="product-price">
                            $34.00
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-sm-6">
                <div class="product-item">
                    <div class="pi-pic">
                        <img src="/../img/products/women-4.jpg" alt="">
                        <div class="icon">
                            <i class="icon_heart_alt"></i>
                        </div>
                        <ul>
                            <li class="w-icon active"><a href="#"><i class="icon_bag_alt"></i></a></li>
                            <li class="quick-view"><a href="#">+ Quick View</a></li>
                            <li class="w-icon"><a href="#"><i class="fa fa-random"></i></a></li>
                        </ul>
                    </div>
                    <div class="pi-text">
                        <div class="catagory-name">Towel</div>
                        <a href="#">
                            <h5>Converse Shoes</h5>
                        </a>
                        <div class="product-price">
                            $34.00
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Related Products Section End -->

<!-- Partner Logo Section Begin -->
<div class="partner-logo">
    <div class="container">
        <div class="logo-carousel owl-carousel">
            <div class="logo-item">
                <div class="tablecell-inner">
                    <img src="/../img/logo-carousel/logo-1.png" alt="">
                </div>
            </div>
            <div class="logo-item">
                <div class="tablecell-inner">
                    <img src="/../img/logo-carousel/logo-2.png" alt="">
                </div>
            </div>
            <div class="logo-item">
                <div class="tablecell-inner">
                    <img src="/../img/logo-carousel/logo-3.png" alt="">
                </div>
            </div>
            <div class="logo-item">
                <div class="tablecell-inner">
                    <img src="/../img/logo-carousel/logo-4.png" alt="">
                </div>
            </div>
            <div class="logo-item">
                <div class="tablecell-inner">
                    <img src="/../img/logo-carousel/logo-5.png" alt="">
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Partner Logo Section End -->

<!-- Footer Section Begin -->
<footer class="footer-section">
    <div class="container">
        <div class="row">
            <div class="col-lg-3">
                <div class="footer-left">
                    <div class="footer-logo">
                        <a href="#"><img src="/../img/footer-logo.png" alt=""></a>
                    </div>
                    <ul>
                        <li>Address: 60-49 Road 11378 New York</li>
                        <li>Phone: +65 11.188.888</li>
                        <li>Email: hello.colorlib@gmail.com</li>
                    </ul>
                    <div class="footer-social">
                        <a href="#"><i class="fa fa-facebook"></i></a>
                        <a href="#"><i class="fa fa-instagram"></i></a>
                        <a href="#"><i class="fa fa-twitter"></i></a>
                        <a href="#"><i class="fa fa-pinterest"></i></a>
                    </div>
                </div>
            </div>
            <div class="col-lg-2 offset-lg-1">
                <div class="footer-widget">
                    <h5>Information</h5>
                    <ul>
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Checkout</a></li>
                        <li><a href="#">Contact</a></li>
                        <li><a href="#">Serivius</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-2">
                <div class="footer-widget">
                    <h5>My Account</h5>
                    <ul>
                        <li><a href="#">My Account</a></li>
                        <li><a href="#">Contact</a></li>
                        <li><a href="#">Shopping Cart</a></li>
                        <li><a href="#">Shop</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="newslatter-item">
                    <h5>Join Our Newsletter Now</h5>
                    <p>Get E-mail updates about our latest shop and special offers.</p>
                    <form action="#" class="subscribe-form">
                        <input type="text" placeholder="Enter Your Mail">
                        <button type="button">Subscribe</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="copyright-reserved">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="copyright-text">
                        <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                        Copyright &copy;<script>document.write(new Date().getFullYear());</script>
                        All rights reserved | This template is made with <i class="fa fa-heart-o"
                                                                            aria-hidden="true"></i> by <a
                            href="https://colorlib.com" target="_blank">Colorlib</a>
                        <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                    </div>
                    <div class="payment-pic">
                        <img src="/../img/payment-method.png" alt="">
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>
<!-- Footer Section End -->
<!-- Modal -->
<div class="modal fade" id="exitModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Log out</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                See you next time
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" onclick="logout()">Log out</button>
            </div>
        </div>
    </div>
</div>
<!-- Js Plugins -->
<script src="/../js/jquery-3.3.1.min.js"></script>
<script src="/../js/bootstrap.min.js"></script>
<script src="/../js/jquery-ui.min.js"></script>
<script src="/../js/jquery.countdown.min.js"></script>
<script src="/../js/jquery.nice-select.min.js"></script>
<script src="/../js/jquery.zoom.min.js"></script>
<script src="/../js/jquery.dd.min.js"></script>
<script src="/../js/jquery.slicknav.js"></script>
<script src="/../js/owl.carousel.min.js"></script>
<script src="/../js/main.js"></script>
<script src="/../js/jquery.star-rating-svg.js"></script>
<script>
    $(document).ready(function () {
        $('form').submit(false);

        $(".my-rating").starRating({
            totalStars: 5,
            starShape: 'rounded',
            starSize: 40,
            emptyColor: 'lightgray',
            hoverColor: '#FAC451',
            activeColor: 'crimson',
            useGradient: false,
            disableAfterRate: false,
            useFullStars: true,
            minRating: 1,
            callback: function (currentRating, $el) {
                console.log($(".my-rating").starRating('getRating'));
            }
        });

        //Set select
        let size = $('#p_select').val();

        //collection filter
        $(".filter-catagories li a ").on('click', function () {
            size = $('#p_select').val();
            $(window).on("scroll", loadMore);
            let id = $(this).attr("data-collection-id");
            $.ajax({
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                type: "GET",
                url: `/api/products/collection/${id}`,
                success: function (data) {
                    redrawProduct(data)
                    $(window).off("scroll", loadMore);
                },
                error: function () {
                    let content = `<div className="callout callout-warning">
                        <h5>Ops!!</h5>

                        <p>Nothing matched your search terms. Please try again with some different filter</p>
                    </div>`
                    document.getElementById("product_list").innerHTML = content;
                    $("html, body").animate({scrollTop: 180}, 1000);
                }
            })
            return false;
        });

        //filter button onclick
        $("#filter_button").on('click', function () {
            size = $('#p_select').val();
            $(window).on("scroll", loadMore);
            let brandIds = [];
            $(':checkbox:checked').each(function (i) {
                brandIds[i] = $(this).val();
            });
            let minPrice = $('#minamount').val();
            let maxPrice = $('#maxamount').val();
            minPrice = minPrice.substr(1, minPrice.length);
            maxPrice = maxPrice.substr(1, maxPrice.length);
            let page = $('#p_select').val();
            let sort = $('#sorting_product').val();
            size = page;
            $.ajax({
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                type: "GET",
                url: `/api/products/brand?min=${minPrice}&max=${maxPrice}&brandIds=${brandIds}&number=${page}&sort=${sort}`,
                success: function (data) {
                    redrawProduct(data.content)
                },
                error: function () {
                    let content = `<div className="callout callout-warning">
                        <h5>Ops!!</h5>

                        <p>Nothing matched your search terms. Please try again with some different filter</p>
                    </div>`
                    document.getElementById("product_list").innerHTML = content;
                    $("html, body").animate({scrollTop: 180}, 1000);
                    $(window).off("scroll", loadMore);
                }
            })
            return false;
        })


        //redraw niceSelect
        $('#p_select').niceSelect();
        $('#sorting_product').niceSelect();

        //Name search
        $('#advanced_search').on('click', function () {
            size = $('#p_select').val();
            $(window).on("scroll", loadMore);
            let keyword = $("#search_box").val();
            $.ajax({
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                type: "GET",
                url: `/api/products/search/${keyword}`,
                success: function (data) {
                    redrawProduct(data);
                    $(window).off("scroll", loadMore);
                },
                error: function () {
                    let content = `<div className="callout callout-warning">
                        <h5>Ops!!</h5>

                        <p>Nothing matched your search terms. Please try again with some different filter</p>
                    </div>`
                    document.getElementById("product_list").innerHTML = content;
                    $(window).off("scroll", loadMore);
                }
            })
        })


    });

    //add new review
    function addReview() {
        let productId = $('.site-btn').attr('id');
        let token = window.localStorage.getItem('token');
        let rating = $(".my-rating").starRating('getRating');
        let content = $('#review_content').val();
        if (rating == 0) {
            alert("must select rating")
        } else if (content == "") {
            alert("must input content")
        } else {
            $.ajax({
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json',
                    'Authorization': localStorage.getItem("token"),
                },
                type: "GET",
                url: `/users/get/${token}`,
                success: function (data) {
                    $.ajax({
                        headers: {
                            'Accept': 'application/json',
                            'Content-Type': 'application/json',
                            'Authorization': localStorage.getItem("token"),
                        },
                        type: "POST",
                        url: `/review/add?content=${content}&userId=${data.id}&productId=${productId}&rating=${rating}`,
                        success: function (data) {
                            redrawReview();
                        }
                    })
                },
                error: function (data) {
                    alert("You need login first");
                }
            })
        }
        event.preventDefault();
    }

    //redraw review
    function redrawReview(event) {
        let productId = $('.site-btn').attr('id');
        $.ajax({
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json',
                'Authorization': localStorage.getItem("token"),
            },
            type: "GET",
            url: `/review/${productId}`,
            success: function (reviews) {
                $.ajax({
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json',
                        'Authorization': localStorage.getItem("token"),
                    },
                    type: "GET",
                    url: `/review/count/${productId}`,
                    success: function (review_number) {
                        document.getElementById("review-number-tab").innerHTML = `<a  data-toggle="tab" href="#tab-3" role="tab" class="active" aria-selected="true">Customer Reviews (${review_number})</a>`

                        let content = `<div class="customer-review-option">
                                    <h4>${review_number} Reviews</h4>`
                        for (let i = 0; i < reviews.length; i++) {
                            content += getReview(reviews[i]);
                        }
                        content += `<div class="personal-rating">
                                        <h6>Your Rating</h6>
                                        <div class="my-rating">
                                        </div>
                                    </div>
                                    <div class="leave-comment">
                                        <h4>Leave A Comment</h4>
                                        <form class="comment-form">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <textarea id="review_content" placeholder="Messages"></textarea>
                                                    <button id ="${productId}" class="site-btn"
                                                            onclick="addReview(id)">Send message
                                                    </button>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>`
                        document.getElementById("tab-3").innerHTML = content;
                        $.getScript("/../js/jquery.star-rating-svg.js");
                        //redraw rating
                        $(".my-rating").starRating({
                            totalStars: 5,
                            starShape: 'rounded',
                            starSize: 40,
                            emptyColor: 'lightgray',
                            hoverColor: '#FAC451',
                            activeColor: 'crimson',
                            useGradient: false,
                            disableAfterRate: false,
                            useFullStars: true,
                            minRating: 1,
                            callback: function (currentRating, $el) {
                            }
                        });
                        event.preventDefault();
                    }
                })
            },
            error: function (data) {
                console.log("error")
            }
        })
    }


    //get review
    function getReview(review) {
        let contentReview = `<div class="comment-option">
                                        <div class="co-item">
                                            <div class="avatar-pic">
                                                <img src="/files/${review.user.avatar.name}" alt="${review.user.avatar.name}">
                                            </div>
                                            <div class="avatar-text">
                                        <div class="at-rating">`;
        for (let i = 0; i < review.rating; i++) {
            contentReview += `<i class="fa fa-star"></i>`
        }
        contentReview += `<h5>${review.user.username}<span>27 Aug 2019</span></h5>
                                                <div class="at-reply">${review.content}</div>
                                            </div>
                                        </div>
                                    </div>`;
        return contentReview;
    }

    //redraw product
    function redrawProduct(products) {
        let content = `<div id="product_list" class="row">
                    <div class="row">`
        for (let i = 0; i < products.length; i++) {
            content += getProduct(products[i]);
        }
        content += `  </div>
                    </div>`
        document.getElementById("product_list").innerHTML = content;
        event.preventDefault();
    }

    function getProduct(product) {
        return `<div class="col-lg-4 col-sm-6">
                            <div class="product-item">
                                <div class="pi-pic">
                                    <img src="/files/${product.image.name}" alt="${product.image.name}">
<!--                                    <div class="sale pp-sale">Sale</div>-->
                                    <div class="icon">
                                        <i class="icon_heart_alt"></i>
                                    </div>
                                    <ul>
                                        <li class="w-icon active"><a href="#"><i class="icon_bag_alt"></i></a></li>
                                        <li class="quick-view" data-view-id="${product.id}" onclick="showProductDetail(this)"><a href="/product/${product.id}">+ Quick View</a></li>
                                        <li class="w-icon"><a href="#"><i class="fa fa-random"></i></a></li>
                                    </ul>
                                </div>
                                <div class="pi-text">
                                    <div class="catagory-name">${product.category.name}</div>

                                    <a href="#">
                                        <h5>${product.name}</h5>
                                    </a>
                                    <div class="product-price" >
                                    ${product.price}$
                                        <span>$35.00</span>
                                    </div>
                                </div>
                            </div>
                        </div>`
    }

    window.onload = () =>{
        let token = localStorage.getItem("token");
        if(token!= null){
            $.ajax({
                headers: {
                    'Accept': 'application/json',
                    'Content-type': 'application/json',
                    "Authorization": 'Bearer ' + token
                },
                type:"GET",
                url:`/current_user/${token}`,
                success : function(user){
                    let username = document.getElementById("name_or_login");
                    username.innerHTML =
                        `<div class="login-panel">  <a  href="/users/edit/${user.username}">${user.username}</a>
                            <i class="fa fa-sign-out" aria-hidden="true"  style="cursor: pointer" data-toggle="modal" data-target="#exitModal">
                            Log out
                        </i></div>`;
                }
            })
        }
        renderCartIcon();
        redrawCartItems();
    }
    function logout(){
        localStorage.clear();
        let username = document.getElementById("name_or_login");
        username.innerHTML = `<a href="/login" class="login-panel"><i class="fa fa-user"></i>Login</a>`;
        window.location.href="/login";
    }

    //Render Cart List
    function renderCartIcon(){
        let token = window.localStorage.getItem('token');
        $.ajax({
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json',
                'Authorization': localStorage.getItem("token"),
            },
            type: "GET",
            url: `/users/get/${token}`,
            success: function (user) {
                $.ajax({
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json',
                        'Authorization': localStorage.getItem("token"),
                    },
                    type: "GET",
                    url: `/cart?userId=${user.id}`,
                    success: function (itemNumber) {
                        $('.cart-icon a span').text(itemNumber);
                    }
                })
                $.ajax({
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json',
                        'Authorization': localStorage.getItem("token"),
                    },
                    type: "GET",
                    url: `/cart/items?userId=${user.id}`,
                    success: function (itemsList) {
                        redrawCartItems(itemsList);
                    }
                })
            }
        })
    }


    //Redraw Cart Item
    function redrawCartItems(items) {
        let totalValue = 0;
        let content = `<div class="select-items" style="overflow-y: scroll; height: 300px">
                                    <table>
                                        <tbody>`;
        for (let i = 0; i < items.length; i++) {
            content += getItems(items[i]);
            totalValue += items[i].product.price * items[i].quantity;
        }
        content += `</tbody>
                                    </table>
                                </div>
                                <div class="select-total">
                                    <span>total:</span>
                                    <h5>$${totalValue}.00</h5>
                                </div>
                                <div class="select-button">
                                    <a href="/shop/cart" class="primary-btn view-card">VIEW CARD</a>
                                    <a href="#" class="primary-btn checkout-btn">CHECK OUT</a>
                                </div>`;
        document.getElementById("cart-hover").innerHTML = content;
    }

    //Remove Items From Cart
    function removeItemFromCart(productId){
        let token = window.localStorage.getItem('token');
        //Get user by token
        $.ajax({
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json',
                'Authorization': localStorage.getItem("token"),
            },
            type: "GET",
            url: `/users/get/${token}`,
            success: function (user) {
                //remove item from cart
                $.ajax({
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json',
                        'Authorization': localStorage.getItem("token"),
                    },
                    type: "Delete",
                    url: `/cart/remove?userId=${user.id}&productId=${productId}`,
                    success: function (item) {
                        renderCartIcon();
                    }
                })
            }
        })
        event.preventDefault();
    }

    function getItems(item) {
        let price = parseFloat(item.product.price);
        return `<tr>
                                            <td class="si-pic"><img src="/files/${item.product.image.name}" alt=""></td>
                                            <td class="si-text">
                                                <div class="product-selected">
                                                    <p>$${price}.00 x ${item.quantity}</p>
                                                    <h6>${item.product.name}</h6>
                                                </div>
                                            </td>
                                            <td class="si-close">
                                                <i class="ti-close" onclick="removeItemFromCart(${item.product.id})"></i>
                                            </td>
                                        </tr>`
    }
</script>

</body>

</html>