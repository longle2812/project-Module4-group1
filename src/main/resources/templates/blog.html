<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="Fashi Template">
    <meta name="keywords" content="Fashi, unica, creative, html">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Fashi | Template</title>

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css?family=Muli:300,400,500,600,700,800,900&display=swap" rel="stylesheet">

    <!-- Css Styles -->
    <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="css/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="css/themify-icons.css" type="text/css">
    <link rel="stylesheet" href="css/elegant-icons.css" type="text/css">
    <link rel="stylesheet" href="css/owl.carousel.min.css" type="text/css">
    <link rel="stylesheet" href="css/nice-select.css" type="text/css">
    <link rel="stylesheet" href="css/jquery-ui.min.css" type="text/css">
    <link rel="stylesheet" href="css/slicknav.min.css" type="text/css">
    <link rel="stylesheet" href="css/style.css" type="text/css">
    <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link rel="stylesheet" href="css/comment.css" type="text/css">
</head>

<body>
<!-- Page Preloder -->
<div id="preloder">
    <div class="loader"></div>
</div>

<!-- Header Section Begin -->
<header class="header-section">
    <div class="header-top">
        <div class="container">
            <div class="ht-left">
                <div class="mail-service">
                    <i class=" fa fa-envelope"></i>
                    hello.colorlib@gmail.com
                </div>
                <div class="phone-service">
                    <i class=" fa fa-phone"></i>
                    +65 11.188.888
                </div>
            </div>
            <div class="ht-right">
                    <span id="name_or_login">
                        <a href="/login" class="login-panel"><i class="fa fa-user"></i>Login</a>
                    </span>
                <div class="lan-selector">
                    <select class="language_drop" name="countries" id="countries" style="width:300px;">
                        <option value='yt' data-image="img/flag-1.jpg" data-imagecss="flag yt"
                                data-title="English">English
                        </option>
                        <option value='yu' data-image="img/flag-2.jpg" data-imagecss="flag yu"
                                data-title="Bangladesh">German
                        </option>
                    </select>
                </div>
                <div class="top-social">
                    <a href="#"><i class="ti-facebook"></i></a>
                    <a href="#"><i class="ti-twitter-alt"></i></a>
                    <a href="#"><i class="ti-linkedin"></i></a>
                    <a href="#"><i class="ti-pinterest"></i></a>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="inner-header">
            <div class="row">
                <div class="col-lg-2 col-md-2">
                    <div class="logo">
                        <a href="/index">
                            <img src="img/logo.png" alt="">
                        </a>
                    </div>
                </div>
                <div class="col-lg-7 col-md-7">
                    <div class="advanced-search">
                        <button type="button" class="category-btn">All Categories</button>
                        <form action="#" class="input-group">
                            <input type="text" placeholder="What do you need?">
                            <button type="button"><i class="ti-search"></i></button>
                        </form>
                    </div>
                </div>
                <div class="col-lg-3 text-right col-md-3">
                    <ul class="nav-right">
                        <li class="heart-icon">
                            <a href="#">
                                <i class="icon_heart_alt"></i>
                            </a>
                        </li>
                        <li class="cart-icon"><a href="#">
                            <i class="icon_bag_alt"></i>
                            <!--                                    <span>3</span>-->
                        </a>
                        </li>
                        <li class="cart-price"></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="nav-item">
        <div class="container">
            <div class="nav-depart">
                <div class="depart-btn">
                    <i class="ti-menu"></i>
                    <span>All departments</span>
                    <ul class="depart-hover">
                        <li class="active"><a href="#">Women’s Clothing</a></li>
                        <li><a href="#">Men’s Clothing</a></li>
                        <li><a href="#">Underwear</a></li>
                        <li><a href="#">Kid's Clothing</a></li>
                        <li><a href="#">Brand Fashion</a></li>
                        <li><a href="#">Accessories/Shoes</a></li>
                        <li><a href="#">Luxury Brands</a></li>
                        <li><a href="#">Brand Outdoor Apparel</a></li>
                    </ul>
                </div>
            </div>
            <nav class="nav-menu mobile-menu">
                <ul>
                    <li><a href="/index">Home</a></li>
                    <li><a href="product/shop.html">Shop</a></li>
                    <li><a href="#">Collection</a>
                        <ul class="dropdown">
                            <li><a href="#">Men's</a></li>
                            <li><a href="#">Women's</a></li>
                            <li><a href="#">Kid's</a></li>
                        </ul>
                    </li>
                    <li class="active"><a href="/blogs">Blog</a></li>
                    <li><a href="./contact.html">Contact</a></li>
                    <li><a href="#">Pages</a>
                        <ul class="dropdown">
                            <li><a href="/blog-details">Blog Details</a></li>
                            <li><a href="./shopping-cart.html">Shopping Cart</a></li>
                            <li><a href="./check-out.html">Checkout</a></li>
                            <li><a href="./faq.html">Faq</a></li>
                            <li><a href="/register">Register</a></li>
                            <li><a href="/login">Login</a></li>
                        </ul>
                    </li>
                </ul>
            </nav>
            <div id="mobile-menu-wrap"></div>
        </div>
    </div>
</header>
<!-- Header End -->

<!-- Breadcrumb Section Begin -->
<div class="breacrumb-section">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div id="blog-title" class="breadcrumb-text">
                    <a href="#"><i class="fa fa-home"></i> Home</a>
                    <span>Blog</span>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Breadcrumb Section Begin -->

<!-- Blog Section Begin -->
<div id="blog-section">
    <section class="blog-section spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-6 col-sm-8 order-2 order-lg-1">
                    <div class="blog-sidebar">
                        <div id="write-blog">
                        </div>
                        <div class="search-form">
                            <h4>Search</h4>
                            <form action="#">
                                <input id="blog-search-input" type="text" placeholder="Search . . .  ">
                                <button type="button" onclick="searchBlog()"><i class="fa fa-search"></i></button>
                            </form>
                        </div>
                        <div class="blog-catagory">
                            <h4>Categories</h4>
                            <ul>
                                <li><a href="#">Fashion</a></li>
                                <li><a href="#">Travel</a></li>
                                <li><a href="#">Picnic</a></li>
                                <li><a href="#">Model</a></li>
                            </ul>
                        </div>
                        <div class="recent-post">
                            <h4>Recent Post</h4>
                            <div class="recent-blog">
                                <a href="#" class="rb-item">
                                    <div class="rb-pic">
                                        <img src="img/blog/recent-1.jpg" alt="">
                                    </div>
                                    <div class="rb-text">
                                        <h6>The Personality Trait That Makes...</h6>
                                        <p>Fashion <span>- May 19, 2019</span></p>
                                    </div>
                                </a>
                                <a href="#" class="rb-item">
                                    <div class="rb-pic">
                                        <img src="img/blog/recent-2.jpg" alt="">
                                    </div>
                                    <div class="rb-text">
                                        <h6>The Personality Trait That Makes...</h6>
                                        <p>Fashion <span>- May 19, 2019</span></p>
                                    </div>
                                </a>
                                <a href="#" class="rb-item">
                                    <div class="rb-pic">
                                        <img src="img/blog/recent-3.jpg" alt="">
                                    </div>
                                    <div class="rb-text">
                                        <h6>The Personality Trait That Makes...</h6>
                                        <p>Fashion <span>- May 19, 2019</span></p>
                                    </div>
                                </a>
                                <a href="#" class="rb-item">
                                    <div class="rb-pic">
                                        <img src="img/blog/recent-4.jpg" alt="">
                                    </div>
                                    <div class="rb-text">
                                        <h6>The Personality Trait That Makes...</h6>
                                        <p>Fashion <span>- May 19, 2019</span></p>
                                    </div>
                                </a>
                            </div>
                        </div>
                        <div class="blog-tags">
                            <h4>Product Tags</h4>
                            <div class="tag-item">
                                <a href="#">Towel</a>
                                <a href="#">Shoes</a>
                                <a href="#">Coat</a>
                                <a href="#">Dresses</a>
                                <a href="#">Trousers</a>
                                <a href="#">Men's hats</a>
                                <a href="#">Backpack</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="blogsContainer" class="col-lg-9 order-1 order-lg-2">
                    <div class="row" id="blog-container">
                        <div class="col-lg-6 col-sm-6" th:each="blog : ${blogs}">
                            <div class="blog-item">
                                <div class="bi-pic">
                                    <img src="img/blog/blog-1.jpg" alt="">
                                </div>
                                <div class="bi-text">
                                    <a th:id="${blog.id}" href="#blog-title" onclick="getBlogDetail(this.id)">
                                        <h4 th:text="${blog.title}"></h4>
                                    </a>
                                    <p>travel -
                                        <span th:text="${blog.date.getDate()}"></span>
                                        <span> / </span>
                                        <span th:text="${blog.date.getMonth()+1}"></span>
                                        <span> / </span>
                                        <span th:text="${blog.date.getYear()+1900}"></span>
                                        <span style="margin-bottom: 0;font-size: 14px;font-weight: 700;text-transform: uppercase;color: #e7ab3c; letter-spacing: 2px;line-height: 20px;"> - Author: </span>
                                        <span th:text="${blog.author.username}"></span>
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12 col-sm-12">
                            <nav aria-label="Page navigation example">
                                <ul class="pagination justify-content-end">
                                    <li class="page-item">
                                        <a class="page-link" th:href="@{'/blogs'(page=${blogs.number - 1})}"
                                           th:if="${blogs.hasPrevious()}">Previous</a>
                                    </li>
                                    <li class="page-item"><a class="page-link"><span th:text="${blogs.number+1}"></span>/<span
                                            th:text="${blogs.totalPages}"></span></a></li>

                                    <li class="page-item">
                                        <a class="page-link" th:href="@{'/blogs'(page=${blogs.number + 1})}"
                                           th:if="${blogs.hasNext()}">Next</a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>
<!-- Blog Section End -->

<!-- Partner Logo Section Begin -->
<div class="partner-logo">
    <div class="container">
        <div class="logo-carousel owl-carousel">
            <div class="logo-item">
                <div class="tablecell-inner">
                    <img src="img/logo-carousel/logo-1.png" alt="">
                </div>
            </div>
            <div class="logo-item">
                <div class="tablecell-inner">
                    <img src="img/logo-carousel/logo-2.png" alt="">
                </div>
            </div>
            <div class="logo-item">
                <div class="tablecell-inner">
                    <img src="img/logo-carousel/logo-3.png" alt="">
                </div>
            </div>
            <div class="logo-item">
                <div class="tablecell-inner">
                    <img src="img/logo-carousel/logo-4.png" alt="">
                </div>
            </div>
            <div class="logo-item">
                <div class="tablecell-inner">
                    <img src="img/logo-carousel/logo-5.png" alt="">
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Partner Logo Section End -->

<!-- Footer Section Begin -->
<footer class="footer-section">
    <div class="container">
        <div class="row">
            <div class="col-lg-3">
                <div class="footer-left">
                    <div class="footer-logo">
                        <a href="#"><img src="img/footer-logo.png" alt=""></a>
                    </div>
                    <ul>
                        <li>Address: 60-49 Road 11378 New York</li>
                        <li>Phone: +65 11.188.888</li>
                        <li>Email: hello.colorlib@gmail.com</li>
                    </ul>
                    <div class="footer-social">
                        <a href="#"><i class="fa fa-facebook"></i></a>
                        <a href="#"><i class="fa fa-instagram"></i></a>
                        <a href="#"><i class="fa fa-twitter"></i></a>
                        <a href="#"><i class="fa fa-pinterest"></i></a>
                    </div>
                </div>
            </div>
            <div class="col-lg-2 offset-lg-1">
                <div class="footer-widget">
                    <h5>Information</h5>
                    <ul>
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Checkout</a></li>
                        <li><a href="#">Contact</a></li>
                        <li><a href="#">Serivius</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-2">
                <div class="footer-widget">
                    <h5>My Account</h5>
                    <ul>
                        <li><a href="#">My Account</a></li>
                        <li><a href="#">Contact</a></li>
                        <li><a href="#">Shopping Cart</a></li>
                        <li><a href="#">Shop</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="newslatter-item">
                    <h5>Join Our Newsletter Now</h5>
                    <p>Get E-mail updates about our latest shop and special offers.</p>
                    <form action="#" class="subscribe-form">
                        <input type="text" placeholder="Enter Your Mail">
                        <button type="button">Subscribe</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="copyright-reserved">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="copyright-text">
                        <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                        Copyright &copy;<script>document.write(new Date().getFullYear());</script>
                        All rights reserved | This template is made with <i class="fa fa-heart-o"
                                                                            aria-hidden="true"></i> by <a
                            href="https://colorlib.com" target="_blank">Colorlib</a>
                        <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                    </div>
                    <div class="payment-pic">
                        <img src="img/payment-method.png" alt="">
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>
<!-- Footer Section End -->
<!-- Button trigger modal -->


<!-- Modal -->
<div class="modal fade" id="exitModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Log out</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                See you next time
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" onclick="logout()">Log out</button>
            </div>
        </div>
    </div>
</div>
<!-- Js Plugins -->
<script src="js/jquery-3.3.1.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery-ui.min.js"></script>
<script src="js/jquery.countdown.min.js"></script>
<script src="js/jquery.nice-select.min.js"></script>
<script src="js/jquery.zoom.min.js"></script>
<script src="js/jquery.dd.min.js"></script>
<script src="js/jquery.slicknav.js"></script>
<script src="js/owl.carousel.min.js"></script>
<script src="js/main.js"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script type="text/javascript">
    window.onload = () => {
        let token = localStorage.getItem("token");
        if (token != null) {
            document.getElementById("write-blog").innerHTML = '<a href="/blogs/create">Write your own blog</a>'
            $.ajax({
                headers: {
                    'Accept': 'application/json',
                    'Content-type': 'application/json',
                    "Authorization": 'Bearer ' + token
                },
                type: "GET",
                url: `/current_user/${token}`,
                success: function (user) {
                    let username = document.getElementById("name_or_login");
                    username.innerHTML =
                        `<a href="/users/edit/${user.username}">${user.username}</a>
                            <i class="fa fa-sign-out" aria-hidden="true"  style="cursor: pointer" data-toggle="modal" data-target="#exitModal">
                            Log out
                        </i>`;
                }
            })
        }
    }

    function logout() {
        localStorage.clear();
        let username = document.getElementById("name_or_login");
        username.innerHTML = `<a href="/login" class="login-panel"><i class="fa fa-user"></i>Login</a>`;
        window.location.href = "/login";
    }

    function showBlog(blog) {
        return `<section class="blog-details spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="blog-details-inner">
                        <div class="blog-detail-title">
                            <input type="hidden" id="blog-id" value="${blog.id}">
                            <h2 >${blog.title}</h2>
                            <p>travel - <span>${blog.date.slice(8, 10)} / ${blog.date.slice(5, 7)} / ${blog.date.slice(0, 4)}</span>
                                </p>
                        </div>
                        <div class="blog-large-pic">
                            <img src="img/blog/blog-detail.jpg" alt="">
                        </div>
                        <div class="blog-detail-desc">
                            <p>${blog.content}
                            </p>
                        </div>
                        <div class="blog-quote">
                            <p>“ Technology is nothing. What's important is that you have a faith in people, that
                                they're basically good and smart, and if you give them tools, they'll do wonderful
                                things with them.” <span>- Steven Jobs</span></p>
                        </div>
                        <div class="blog-more">
                            <div class="row">
                                <div class="col-sm-4">
                                    <img src="img/blog/blog-detail-1.jpg" alt="">
                                </div>
                                <div class="col-sm-4">
                                    <img src="img/blog/blog-detail-2.jpg" alt="">
                                </div>
                                <div class="col-sm-4">
                                    <img src="img/blog/blog-detail-3.jpg" alt="">
                                </div>
                            </div>
                        </div>
                        <p>${blog.content}</p>
                        <div class="tag-share">
                            <div class="details-tag">
                                <ul>
                                    <li><i class="fa fa-tags"></i></li>
                                    <li>Travel</li>
                                    <li>Beauty</li>
                                    <li>Fashion</li>
                                </ul>
                            </div>
                            <div class="blog-share">
                                <span>Share:</span>
                                <div class="social-links">
                                    <a href="#"><i class="fa fa-facebook"></i></a>
                                    <a href="#"><i class="fa fa-twitter"></i></a>
                                    <a href="#"><i class="fa fa-google-plus"></i></a>
                                    <a href="#"><i class="fa fa-instagram"></i></a>
                                    <a href="#"><i class="fa fa-youtube-play"></i></a>
                                </div>
                            </div>
                        </div>
                        <div class="blog-post">
                            <div class="row">
                                <div class="col-lg-5 col-md-6">
                                    <a href="#" class="prev-blog">
                                        <div class="pb-pic">
                                            <i class="ti-arrow-left"></i>
                                            <img src="img/blog/prev-blog.png" alt="">
                                        </div>
                                        <div class="pb-text">
                                            <span>Previous Post:</span>
                                            <h5>The Personality Trait That Makes People Happier</h5>
                                        </div>
                                    </a>
                                </div>
                                <div class="col-lg-5 offset-lg-2 col-md-6">
                                    <a href="#" class="next-blog">
                                        <div class="nb-pic">
                                            <img src="img/blog/ti10.jpg" alt="">
                                            <i class="ti-arrow-right"></i>
                                        </div>
                                        <div class="nb-text">
                                            <span>Next Post:</span>
                                            <h5>Announcing New Location and Dates for The International - Dota 2 Championships</h5>
                                        </div>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="posted-by">
                            <div class="pb-pic">
                                <img src="img/blog/post-by.png" alt="">
                            </div>
                            <div class="pb-text">
                                <a href="#">
                                    <h5>${blog.author.username}</h5>
                                </a>
                                <p>Aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate
                                    velit esse cillum bore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud
                                    amodo</p>
                            </div>
                        </div>
                        <div class="leave-comment">

                            <form action="#" class="comment-form">
                                <div class="row">
                                    <div class="col-lg-12" id="comment-list"></div>
                                     <h4>Leave A Comment</h4>
                                    <div class="col-lg-12">
                                        <textarea id="comment" placeholder="Messages"></textarea>
                                        <button type="button" class="site-btn" onclick="writeComment()">Send message</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>`
    }

    function getBlogDetail(id) {
        $.ajax({
            type: "GET",
            url: `/blogs/blog-details/${id}`,
            success: function (blog) {
                document.getElementById("blog-section").innerHTML = showBlog(blog);
                getCommentList();
            }
        })
    }

    function searchBlog(page) {
        let blogSearch = $('#blog-search-input').val();
        if (page == undefined) {
            page = 0;
        }
        $.ajax({
            type: "GET",
            data: {q: `${blogSearch}`, page: `${page}`},
            url: "/blogs/search",
            success: function (blogs) {
                document.getElementById("blogsContainer").innerHTML = showBlogs(blogs);
            }, error: function () {
                document.getElementById("blogsContainer").innerHTML =
                    `<img src="img/no-result-found.png" alt="" style="margin-left: 20%;"/>
                     <p style="margin-left:41%">Try again with the search bar</p>`;
            }
        })
    }

    function showBlogs(blogs) {
        let str = '<div class="row" id="blog-container">';
        console.log(blogs);
        blogs.content.forEach((blog) => {
            str += `<div class="col-lg-6 col-sm-6" ">
                            <div class="blog-item">
                                <div class="bi-pic">
                                    <img src="img/blog/blog-1.jpg" alt="">
                                </div>
                                <div class="bi-text">
                                    <a id="${blog.id}" href="#blog-title" onclick="getBlogDetail(this.id)">
                                        <h4 >${blog.title}</h4>
                                    </a>
                                     <p>
                                         travel - <span>${blog.date.slice(8, 10)} / ${blog.date.slice(5, 7)} / ${blog.date.slice(0, 4)}</span>
                                         <span style="margin-bottom: 0;font-size: 14px;font-weight: 700;text-transform: uppercase;color: #e7ab3c; letter-spacing: 2px;line-height: 20px;"> - Author: </span>
                                            <span>${blog.author.username}</span>
                                     </p>
                                </div>
                            </div>
                        </div>`
        })

        //Xem lai hien thi Previous voi Next
        str += `<div class="col-lg-12 col-sm-12"><nav aria-label="Page navigation example">
                    <ul class="pagination justify-content-end">`;
        let preStr = "";
        let middleStr = ` <li class="page-item"><a class="page-link">${blogs.number + 1}/${blogs.totalPages}</a></li>`;
        let nextStr = "";
        if (blogs.number >= 1) {
            preStr = `<li class="page-item"><a  class="page-link" href="#blog-title" onclick="searchBlog(${blogs.number - 1})">Previous</a></li> `;
        }
        if(blogs.number+1 < blogs.totalPages ){
            nextStr =`<li class="page-item"><a  class="page-link" href="#blog-title" onclick="searchBlog(${blogs.number + 1 })">Next</a></li>`
        }
        str += preStr + middleStr + nextStr + "</nav></div></div>";
        return str;
    }

    function writeComment() {
        let token = localStorage.getItem("token");
        if (token != null) {
            let content = $('#comment').val();
            let blogId = $('#blog-id').val();
            let comment = {
                content: content,
                blog: {
                    id: blogId
                }
            }
            $.ajax({
                headers: {
                    'Accept': 'application/json',
                    'Content-type': 'application/json',
                    'Authorization': 'Bearer' + token
                },
                type: "POST",
                data: JSON.stringify(comment),
                url: `/comments/create/${token}`,
                success: function (comment1) {
                    getCommentList();
                    document.getElementById("comment").innerHTML = "";
                }
                , error: function () {
                    swal("Ooops!", "Your comment contain bad word!Please try again", "error");
                }
            })
        } else {
            swal("Ooops!", "Must login before comment!", "error");
        }
    }

    function getCommentList() {
        let blogId = $('#blog-id').val();
        $.ajax({
            type: "GET",
            url: `/comments/getAll/${blogId}`,
            success: function (comments) {
                document.getElementById("comment-list").innerHTML = showCommentList(comments);
            }
        })
    }

    function showCommentList(comments) {
        let str = `<div class="container"><div class="be-comment-block"><h1 class="comments-title" >Comments (${comments.length})</h1>`;
        for (let i = 0; i < comments.length; i++) {
            str +=
                `<div class="be-comment">
                    <div class="be-img-comment">
                        <a href="blog-detail-2.html">
                            <img src="img/default-avatar.png" alt="" class="be-ava-comment">
                        </a>
                    </div>
                    <div class="be-comment-content">
                        <span class="be-comment-name">
                            <a href="#" style="cursor: default">${comments[i].user.username}</a>
                        </span>
                        <span class="be-comment-time">
                            <i class="fa fa-clock-o"></i>
                            ${comments[i].date.slice(8, 10)} / ${comments[i].date.slice(5, 7)} / ${comments[i].date.slice(0, 4)} at ${parseInt(comments[i].date.slice(11, 13)) + 7}:${comments[i].date.slice(14, 16)}
                        </span>
                        <p class="be-comment-text">
                            ${comments[i].content}
                         </p>
                         <p><i id="like-id-${comments[i].id}"  class="fa fa-thumbs-o-up" aria-hidden="true" style="margin-right: 5px;cursor:pointer;}" onclick="likeComment(this.id)"></i>${comments[i].likes} like</p>
                    </div>
                </div>`
        }
        str += "</div></div>";
        return str;
    }
    function likeComment(id){
        let commentId = id.slice(8);
        console.log(commentId);
        let comment = {
            id: commentId
        }
        let token = localStorage.getItem("token");
        if(token!=null){
            $.ajax({
                headers: {
                    'Accept': 'application/json',
                    'Content-type': 'application/json',
                    'Authorization': 'Bearer' + token
                },
                type: "PUT",
                data: JSON.stringify(comment),
                url: "/comments/increaseLike",
                success : function(comment){
                    console.log("success");
                    getCommentList();
                },error: function(){
                    console.log("error");
                }
            })
        }else {
            swal("Ooops!", "Must login before liking comments!", "error");
        }
    }
</script>
</body>

</html>